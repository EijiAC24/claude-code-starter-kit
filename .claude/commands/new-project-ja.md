# 新規プロジェクト セットアップウィザード

新規プロジェクトのセットアップを対話形式で進めます。コードを書く前に、必要な情報をヒアリングします。

## フェーズ 1: 情報収集

まず、どのように始めるか確認：

```
何を作りますか？

どのように始めますか？

1. 仕様書がある
   → ファイルパスを共有 or テキストを貼り付け

2. 一緒に詰めていく（新しいアイデアにおすすめ）
   → ベストプラクティスを提案しながら質問していきます

3. クイックスタート - 簡単に説明だけ
   → シンプルなプロジェクトやプロトタイプ向け

※ 長い仕様書でもパスを渡してくれれば全部読みます
```

---

### オプション 1: 仕様書がある場合

**ファイルパスの場合** → Read ツールで読み込む

**長い仕様書でも基本は全文保持：**
- `docs/spec.md` にそのままコピー
- 要約は作らない（情報が欠落するため）
- 実装時は必ず仕様書を参照すること

**以下を読み取る：**

1. **プロジェクト概要** - 何をするアプリ/プロジェクトか
2. **技術スタック** - フロントエンド、バックエンド、DB など
3. **プロジェクト規模** - プロトタイプ、MVP、本番
4. **既存リソース** - デザイン、API、参考資料

**不足している情報だけを質問する：**

- 技術スタックが明記されている → 聞かない
- 規模感が書いてある → 聞かない
- リソースが記載されている → 聞かない

**例:** 「Flutter + Supabase で MVP リリース予定のタスク管理アプリ」という仕様なら：
- 技術: Flutter + Supabase ✓
- 規模: MVP ✓
- 聞くのは「デザインファイルなどのリソースはありますか？」だけ

→ **フェーズ 2: 理解の確認** へスキップ

---

### オプション 2: 一緒に詰めていく（インタラクティブモード）

構造化された質問でガイド。**1つずつ質問して、回答を待ってから次へ進む。**

#### ステップ 1: アイデア
```
まずは基本から始めましょう。

どんなプロジェクトですか？
- どんな問題を解決しますか？
- 誰のためのものですか？

自分の言葉で大丈夫です。きれいにまとまってなくてOK。
```

#### ステップ 2: コア機能
```
絶対に必要な機能は何ですか？（これがないとアプリとして成立しない）

2〜5個のコア機能を挙げてください。例：
- 「ユーザーがアカウントを作成できる」
- 「近くのレストランを検索できる」
- 「データをCSVでエクスポートできる」

フォーカスを保つために絞りましょう。追加は後でできます。
```

**ベストプラクティスTip:** ユーザーに伝える：
> Tip: MVPでは3〜5個のコア機能に絞るのがおすすめ。プロジェクト失敗の最大の原因はスコープクリープ。このアプリが「絶対にうまくやらないといけないこと」は何ですか？

#### ステップ 3: やらないこと
```
今回は明確にスコープ外にすることは？

例：
- 「v1ではソーシャル機能は入れない」
- 「まずはWebだけ、モバイルは後で」
- 「最初は決済機能なし」

これを決めておくとプロジェクトの焦点が定まります。
```

#### ステップ 4: 技術スタック
```
どの技術スタックを使いますか？

**Webアプリ:**
- フロントエンド: React/Next.js, Vue/Nuxt, Svelte
- バックエンド: Node.js, Python (FastAPI/Django), Go
- データベース: PostgreSQL, MongoDB, SQLite

**モバイルアプリ:**
- クロスプラットフォーム: Flutter, React Native
- ネイティブ: Swift (iOS), Kotlin (Android)

**ゲーム:**
- Godot, Unity, Unreal

**BaaS（個人開発におすすめ）:**
- Supabase (Postgres + Auth + Storage + Realtime)
- Firebase (NoSQL + Auth + Hosting)

迷ったら制約（予算、期間、経験）を教えてください。おすすめを提案します。
```

**状況に応じたベストプラクティスTip:**

| 状況 | おすすめ |
|------|----------|
| 個人開発、MVP | BaaS (Supabase/Firebase) - 運用負荷が少ない |
| 新しいスタックを学びたい | 新しいものは1つだけ、残りは慣れたもので |
| リアルタイム機能が必要 | Supabase Realtime か Firebase |
| 複雑なクエリが必要 | NoSQLより PostgreSQL (Supabase) |
| オフラインファーストのモバイル | Flutter + ローカルDB (Hive/Isar) |
| クイックプロトタイプ | Next.js + Vercel (即デプロイ) |

#### ステップ 5: プロジェクト規模
```
プロジェクトの規模感は？

1. クイックプロトタイプ（1〜2週間、スピード重視）
   → テストは省略、シンプルなUI、コンセプト実証

2. MVPリリース（1〜2ヶ月）
   → コア機能を磨き込み、基本テスト、本番運用可能

3. 本番アプリ（継続開発）
   → フルテストカバレッジ、CI/CD、監視、スケーラビリティ

どれが目標に近いですか？
```

#### ステップ 6: 既存リソース
```
既存のリソースはありますか？

- UIデザイン / モックアップ / スケッチ
- 参考にしたいアプリ
- APIドキュメント（外部サービス連携の場合）
- ブランドガイドライン

画像ファイルがあればパスを教えてください。整理します。
```

#### ステップ 7: 仕様書を生成

すべての情報を集めたら、仕様書を生成：

```markdown
# [プロジェクト名] 仕様書

## 概要
[1段落の説明]

## 課題とターゲットユーザー
- 課題: [どんな問題を解決するか]
- ターゲット: [誰のためか]

## コア機能 (MVP)
1. [機能 1]
2. [機能 2]
3. [機能 3]

## スコープ外 (v1)
- [作らないもの]

## 技術スタック
| レイヤー | 技術 |
|----------|------|
| フロントエンド | [選択] |
| バックエンド | [選択] |
| データベース | [選択] |
| ホスティング | [選択] |

## ユーザーストーリー
| ユーザーとして | 〇〇したい | なぜなら |
|----------------|------------|----------|
| [ユーザー種別] | [アクション] | [理由] |

## プロジェクト規模
- 種別: [プロトタイプ/MVP/本番]
- タイムライン: [言及があれば]

## リソース
- [提供されたリソースのリスト]

---
生成日: [日付]
```

これを `docs/spec.md` に保存し、ユーザーに確認を求める。

---

### オプション 3: クイックスタート

シンプルなプロジェクトや簡単に説明だけしたい場合：

```
了解！教えてください：
1. 何を作るか（一言で）
2. 技術スタック（または「おすすめして」）
3. プロトタイプ or MVP？
```

読み取れる情報を抽出し、足りない部分は妥当なデフォルトで補う。

---

### 仕様書にない場合のみ質問：

**技術スタック（不明な場合）:**
```
技術スタックは何を使いますか？

例：
- フロントエンド: React/Next.js, Vue, Flutter, Godot
- バックエンド: Node.js, Python, Supabase, Firebase
- データベース: PostgreSQL, MongoDB, SQLite
```

**プロジェクト規模（不明な場合）:**
```
プロジェクトの規模感は？

1. クイックプロトタイプ / ハッカソン（スピード重視）
2. サイドプロジェクト / MVP（バランス型）
3. 本番アプリ（品質、テスト、CI/CD 重視）
```

**既存リソース（記載がない場合）:**
```
既存のリソースはありますか？

- UI デザイン / プロトタイプ画像（スクショ、Figma、手書きでもOK）
- ワイヤーフレーム / 画面遷移図
- API ドキュメント
- 参考にしたいアプリやサイト
- ブランドガイドライン（色、フォントなど）

※ 画像がある場合はファイルパスを教えてください。docs/designs/ に配置します。
```

## フェーズ 2: 理解の確認

情報を収集したら、理解した内容をまとめて確認：

```
## プロジェクトサマリー

**プロジェクト:** [名前/説明]
**種別:** [Web アプリ / モバイルアプリ / ゲーム / API / など]
**スタック:** [使用技術]
**規模:** [プロトタイプ / MVP / 本番]

**主要機能:**
1. [機能 1]
2. [機能 2]
3. [機能 3]

**リソース:**
- [提供されたリソースのリスト]

この理解で合っていますか？セットアップを進めていいですか？
```

## フェーズ 3: プロジェクトセットアップ

確認が取れたら、以下を実行：

### ステップ 1: スターターキット設定
- `.claude/` フォルダ構成をコピー
- 技術スタックに応じて不要なルールを削除：
  - Web (React/Next.js): code-style, testing, security, git-workflow, design-patterns, frontend-design を残す
  - Flutter: dart-flutter, testing, security, git-workflow, design-patterns, frontend-design を残す
  - Godot: godot, security, git-workflow, design-patterns, frontend-design を残す
  - Node.js API: code-style, testing, security, git-workflow, design-patterns を残す

### ステップ 2: CLAUDE.md 作成
以下を設定：
- プロジェクト固有のコマンド
- 正しいプロジェクト構成
- 技術スタックのメモ
- 仕様書へのリンク

### ステップ 3: ディレクトリ構成作成
技術スタックに応じたフォルダを作成：
- `src/` または `lib/` - ソースコード
- `tests/` - テストファイル
- `docs/` - ドキュメント
  - `docs/spec.md` - 仕様書
  - `docs/designs/` - UI画像、ワイヤーフレーム、プロトタイプ画像

**UI画像がある場合:**
- ユーザーから受け取った画像を `docs/designs/` にコピー
- CLAUDE.md に参照を追加: `@docs/designs/`
- 実装時にこれらの画像を参照してUIを再現

### ステップ 4: プロジェクト初期化
- 適切な init コマンドを実行（npm init, flutter create など）
- コア依存関係をインストール
- 設定ファイルをセットアップ

### ステップ 5: Git セットアップ & 初回 Push

ユーザーに確認：

```
Git をセットアップしてリモートリポジトリに push しますか？

1. はい、GitHub/GitLab の URL があります
2. はい、GitHub に新しいプライベートリポジトリを作成（gh CLI が必要）
3. いいえ、今はスキップ
```

**オプション 1: URL がある場合**
- リポジトリ URL を聞く
- 実行：
  ```bash
  git init
  git add .
  git commit -m "Initial commit: project setup"
  git remote add origin <URL>
  git branch -M main
  git push -u origin main
  ```

**オプション 2: 新規プライベートリポジトリ作成**
- `gh` CLI が使えるか確認（`gh --version`）
- プロジェクト名からリポジトリ名を自動生成（kebab-case、小文字）
  - 例: 「タスク管理アプリ」→ `task-management-app`
- プロジェクト概要から短い説明文を自動生成（1行、100文字程度）
  - 例: "A mobile app for managing daily tasks with reminders and categories"
- 提案した名前と説明を表示して確認：
  ```
  プライベートリポジトリを作成します:
  - 名前: task-management-app
  - 説明: A mobile app for managing daily tasks with reminders and categories

  これでOKですか？（変更があれば教えてください）
  ```
- 実行：
  ```bash
  git init
  git add .
  git commit -m "Initial commit: project setup"
  gh repo create <repo-name> --private --description "<description>" --source=. --remote=origin --push
  ```

**オプション 3: スキップ**
- ローカルバージョン管理用に `git init` だけ実行
- 後で push できることを伝える

## フェーズ 4: 計画立案

セットアップ完了後、次を確認：

```
セットアップ完了！では実装の計画を立てましょう。

どうしますか？
1. MVP の詳細タスクリストを作る
2. まずデータモデル / スキーマを設計する
3. 特定の機能から始める
4. その他
```

## 重要なルール

- 質問フェーズを絶対にスキップしない
- 必ずユーザーの回答を待つ
- 変更を加える前に理解を確認する
- 技術的な判断に迷ったら質問する
- 何をしているかユーザーに常に伝える
